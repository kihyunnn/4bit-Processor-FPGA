# Verilog로 구현한 16비트 MIPS 유사 마이크로프로세서

## 1. 프로젝트 개요

이 프로젝트는 Verilog HDL을 사용하여 간소화된 16비트 MIPS 유사 마이크로프로세서를 설계하고, FPGA 보드에서 구현 및 검증한 결과물입니다. 물리적인 스위치와 버튼으로 16비트 명령어를 입력받아 산술/논리 연산을 수행하고, 그 결과를 LED와 7세그먼트 디스플레이(SSD)에 출력합니다.

프로젝트의 핵심 목표는 마이크로프로세서의 핵심 구성 요소인 **I/O, 제어 장치(Control Unit), 레지스터 파일(Register File), 그리고 산술 논리 장치(ALU)**를 유기적으로 통합하여 하나의 완전한 시스템을 구축하는 것입니다. 이를 통해 컴퓨터 구조와 디지털 논리 회로 설계에 대한 이해를 보여줍니다.

---

## 2. 핵심 기능 및 설계 특징

본 구현은 기본적인 요구사항을 넘어 안정성, 성능, 그리고 강력한 오류 처리 기능에 중점을 두었습니다.

*   **✅ 예외 처리 (Exception Handling)**: 덧셈과 뺄셈 연산 시 발생할 수 있는 **오버플로우(Overflow)를 감지**하는 기능을 구현했습니다. 오버플로우가 발생하면 연산을 중단하고 SSD에 "OVFL" 메시지를 출력하여 데이터 손상을 방지합니다.
*   **✅ 안정적인 입력 처리**: 물리적 버튼 입력 시 발생하는 **채터링(Chattering) 현상을 제거**하기 위해 `Debouncer`를, 비동기 신호를 시스템 클럭에 맞추기 위해 `Synchronizer` 모듈을 적용하여 FSM의 상태 전이를 안정화했습니다.
*   **✅ 고성능 연산 회로**: 단순한 리플 캐리 가산기 대신, 고속 연산이 가능한 **캐리 룩어헤드 가산기(Carry Lookahead Adder, CLA)**를 직접 설계하여 ALU에 적용했습니다.

---

## 3. 시스템 아키텍처 및 모듈

본 마이크로프로세서는 16비트 데이터 경로와 고정 길이 명령어 형식을 갖는 간소화된 MIPS 아키텍처를 기반으로 합니다.

### 3.1. 명령어 형식

모든 명령어는 16비트 길이이며, 4개의 4비트 필드로 나뉩니다.

| 비트    | 15:12  | 11:8 | 7:4 | 3:0 |
| :------ | :----: | :--: | :--: | :-: |
| **필드** | Opcode | Rd1  | Rd2  | Wr  |

*   **Opcode**: 수행할 연산의 종류를 지정합니다 (예: ADD, AND, SHIFT).
*   **Rd1**: 첫 번째 소스 레지스터의 주소입니다.
*   **Rd2**: 두 번째 소스 레지스터의 주소 또는 즉시값(immediate value)입니다.
*   **Wr**: 연산 결과를 저장할 목적지 레지스터의 주소입니다.

### 3.2. 핵심 모듈

#### 1. I/O 블록 및 FSM (`io_block`, `mips_fsm`, `mips_counter`)

*   **기능**: 최상위 모듈로서 모든 사용자 인터랙션을 관리하고, 유한 상태 머신(FSM)을 통해 전체 작업 흐름을 총괄합니다.
*   **구현**:
    *   FSM은 요구사항에 명시된 7개의 상태(`Idle`, `명령어 입력 1~4`, `실행`, `완료`)로 정의되었습니다.
    *   `mips_counter` 모듈은 버튼 입력을 처리하며, BTN0과 BTN3에 대해 **단일 클럭 펄스**를 생성하여 한 번의 클릭에 한 상태만 전이하도록 합니다.
    *   '누르고 있는 동안' 연속 동작이 필요한 BTN1을 위해, 값이 계속 유지되는 `debouncer_held` 모듈을 별도로 구현했습니다.
    *   `hex2ssd` 모듈은 4비트 16진수 값을 7세그먼트 신호로 변환하며, 오버플로우 발생 시 "OVFL" 메시지를 표시하는 커스텀 로직을 포함합니다.

#### 2. 제어 장치 (`control`)

*   **기능**: 명령어의 `Opcode`를 해석하여 데이터 경로를 지시하는 핵심 제어 신호(`RegWrite`, `ALUSrc`, `ALUOp`)를 생성합니다.
*   **구현**: `case` 문을 사용하여 16개의 모든 `Opcode`에 대한 제어 신호를 명확하게 매핑했습니다.

#### 3. 레지스터 파일 (`register`)

*   **기능**: `reg [3:0] registers [0:15]` 배열을 통해 프로세서의 작업 데이터를 저장합니다.
*   **구현**:
    *   MIPS 아키텍처의 관례에 따라 **0번 레지스터는 항상 0의 값을 갖도록** 하드웨어적으로 강제했습니다.
    *   `RegWrite` 신호가 1이고, 목적지 주소가 0이 아니며, **ALU에서 오버플로우가 발생하지 않았을 때만** 쓰기 동작이 일어나도록 설계하여 데이터 무결성을 강화했습니다.

#### 4. 산술 논리 장치 (ALU) (`alu`, `cla4`)

*   **기능**: 모든 산술 및 논리 연산을 수행합니다.
*   **구현**:
    *   **고성능 가산기**: **4비트 캐리 룩어헤드 가산기(`cla4`)**를 직접 설계하고 적용하여 산술 연산 성능을 향상시켰습니다.
    *   **효율적인 뺄셈**: 2의 보수 원리를 이용하여 별도의 뺄셈기 없이 덧셈기 모듈을 재사용했습니다.
    *   **독창적인 오버플로우 검출**: `overflow = c3 ^ c4`라는 간결한 로직으로 오버플로우를 정확하게 검출했습니다. (`c3`: 부호 비트로의 캐리, `c4`: 최종 캐리 출력)

---

## 4. 결론

본 프로젝트는 완전한 기능의 데이터 경로와 제어 장치를 갖춘 16비트 MIPS 유사 마이크로프로세서를 성공적으로 구현했습니다. 안정적인 I/O 처리, 고성능 캐리 룩어헤드 가산기, 그리고 정밀한 제어 로직을 특징으로 하여 안정성, 성능, 정확성에 중점을 두고 설계되었습니다. 최종 구현물은 모든 설계 명세를 충족하는 잘 구조화된 완전한 기능의 프로세서입니다.